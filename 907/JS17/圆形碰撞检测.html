<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			div {
				width: 100px;
				height: 100px;
				border-radius: 50%;
			}
			#d1 {
				background: red;
				position: absolute;
			}
			#d2 {
				background: yellow;
				position: absolute;
				top: 300px;
				left: 200px;
			}
		</style>
	</head>
	<body>
		<div id="d1"></div>
		<div id="d2"></div>
	</body>
	
	<script type="text/javascript">
		var oDiv1 = document.getElementById("d1");
		var oDiv2 = document.getElementById("d2");
		oDiv1.onmousedown = function(eve) {
			var x = eve.clientX - this.offsetLeft;
			var y = eve.clientY - this.offsetTop;
			document.onmousemove = function(eve) {
				//位置
			var l = eve.clientX - x;
			var t = eve.clientY - y;
			
			//碰撞检测 计算圆心距 和 两圆半径和的关系
			var x1 = oDiv1.offsetLeft + oDiv1.offsetWidth/2;
			var y1 = oDiv1.offsetTop + oDiv1.offsetHeight/2;
			var x2 = oDiv2.offsetLeft + oDiv2.offsetWidth/2;
			var y2 = oDiv2.offsetTop + oDiv2.offsetHeight/2;
			//圆心距
			var c = Math.sqrt(Math.pow((x1-x2), 2) + Math.pow((y1-y2), 2));
			console.log(c);
			//两圆半径和
			var r = (oDiv1.offsetWidth/2) + oDiv2.offsetWidth/2;
			if(c > r) {
				oDiv1.style.background = "red";
				//不碰撞 修改位置
				oDiv1.style.left = l + "px";
				oDiv1.style.top = t + "px";
			} else {
				//碰撞
				oDiv1.style.background = "blue";
			}
 			
			}
		};
		
		document.onmouseup = function() {
			document.onmousemove = document.onmouseup = null;
		}
		
	</script>
	
</html>
