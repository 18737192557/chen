<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			.d1 {
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
			}
			.d2 {
				width: 100px;
				height: 100px;
				background: yellow;
				position: absolute;
				top: 200px;
				left: 300px;
			}
		</style>
	</head>
	<body>
		<div class="d1"></div>
		<div class="d2"></div>
	</body>
	<script type="text/javascript">
		var oDiv1 = document.querySelector(".d1");
		var oDiv2 = document.querySelector(".d2");
		
		oDiv1.onmousedown = function(eve) {
			var x = eve.clientX - this.offsetLeft;
			var y = eve.clientY - this.offsetTop;
			document.onmousemove = function(eve) {
				//位置
			var l = eve.clientX - x;
			var t = eve.clientY - y;
			
			//碰撞检测
			//获取d1的上下左右的坐标
			var L1 = oDiv1.offsetLeft;
			var R1 = oDiv1.offsetLeft + oDiv1.offsetWidth;
			var T1 = oDiv1.offsetTop;
			var B1 = oDiv1.offsetTop + oDiv1.offsetHeight;
			//获取d2的上下左右的坐标
			var L2 = oDiv2.offsetLeft;
			var R2 = oDiv2.offsetLeft + oDiv2.offsetWidth;
			var T2 = oDiv2.offsetTop;
			var B2 = oDiv2.offsetTop + oDiv2.offsetHeight;
			if(L1 > R2 || R1 < L2 || T1 > B2 || B1 < T2) {
				oDiv1.style.background = "red";
				//不碰撞 修改位置
				oDiv1.style.left = l + "px";
				oDiv1.style.top = t + "px";
			} else {
				//碰撞
				oDiv1.style.background = "blue";
			}
 			
			}
		};
		
		document.onmouseup = function() {
			document.onmousemove = document.onmouseup = null;
		}
		
		
	</script>
</html>
